     Opusmodus                                                               spear-data-to-library      1

     spear-data-to-library &key data name section index note
     [Function]

     Arguments and Values:
     data                      A string. Speci es the name of the original data le generated by the SPEAR
                               application, which should be placed in the ~/Opusmodus/Spectrum Data/Data/
                               directory.
     name                      A symbol. Designates the name of the library to be created.
     section                   A symbol. Designates the name of the library section to be created.
     index                     A symbol. Serves as an index name or identi er for the library partials.
     note                      (optional): A string. Provides an annotation or comment associated
                               with the library.


     Description:

     This function processes and imports spectral data from the SPEAR (Sinusoidal Partial
     Editing Analysis and Resynthesis) application, developed by Michael Klingbeil. SPEAR is a
     sophisticated tool for audio analysis, editing, and synthesis, based on the McAulay-Quatieri
     technique. It represents sounds using sinusoidal tracks or 'partials', each track depicting a
     sinusoidal wave with time-varying frequency and amplitude.

     The resynthesis process in SPEAR, which involves computing and summing all sinusoidal
     waves, can closely approximate the original sound. The sinusoidal model used in SPEAR
     provides extensive analytical detail about time-varying frequency content and allows for
     signi cant exibility in sound editing and manipulation. SPEAR supports real-time synthesis
     of numerous partials, extensive editing features like cut, paste, undo/redo, and handles
     various standard le formats for data import/export.

     SPEAR, available at http://www.klingbeil.com/spear/, is free software. It exports two types
     of spectral data: two-point data (frequency and amplitude, referred to as 'frames') and
     three-point data (time, frequency, and amplitude, referred to as 'partials').

     The initial step in using this function is to place the SPEAR-generated data le in the ~/
     Opusmodus/Spectrum Data/Data/ directory. SPEAR-DATA-TO-LIBRARY will locate the
     data le in this directory, convert it, and save a new le in the ~/Opusmodus/Spectrum Data/
     Partials/ folder. Ultimately, the resultant ‘library’ le will be stored in the ~/Opusmodus/User
     Source/Libraries/Def-Library/ directory.
fi
fi
          fl
                  fi
                                     fi
                                                  fi
                                                       fi
                                                                 fi
                                                                      fi
                                                                              fi
Opusmodus                                                          spear-data-to-library   2

Examples:

Generate a library with frames (two-point data):

(spear-data-to-library
  :data "la-mar-frames"            ; Original SPEAR file name (.txt).
  :name 'la-mar-frames             ; Name for the generated library.
  :section 'frames                 ; Name of the library section.
  :index 'p                        ; Index name for each partial.
)

The structure of the frames library le is envisioned as follows:

(in-package :Opusmodus)
;;; -----------------------------------------------------------
;;; Library | Opusmodus Version 3.0.29183 | 2024-01-31 13:00:37
;;; -----------------------------------------------------------

(def-library la-mar-frames
 (:section frames

  p0 '(13.312057 0.007893 77.37494 0.003534 118.87299 0.027961 149.22371
0.002628 184.69414 0.005176 243.29894 0.040109 286.29483 0.118167
337.531 0.003675 360.823 0.007109 407.72028 0.010316 449.46475 0.009431

Generate a library with partials (three-point data):

(spear-data-to-library
  :data "la-mar-partials" ; Original SPEAR file name (.txt).
  :name 'la-mar-partials ; Name for the generated library.
  :section 'partials      ; Name of the library section.
  :index 'p               ; Index name for each partial.
)

The structure of the partials library le is envisioned as follows:

(in-package :Opusmodus)
;;; -----------------------------------------------------------
;;; Library | Opusmodus Version 3.0.29183 | 2024-01-31 13:02:10
;;; -----------------------------------------------------------

(def-library la-mar-partials
 (:section partials

  p0 '(0.0 15731.577 3.0E-4 0.012495 15730.756 2.9E-4 0.024989 15730.761
2.72E-4 0.037483 15731.539 2.54E-4 0.049977 15731.942 2.47E-4 0.062472
15731.969 2.54E-4 0.074966 15732.149 2.63E-4 0.087461 15732.627 2.63
                              fi
                                    fi
Opusmodus                                                             spear-data-to-library   3

Library Usage Example:

Assigning a list of partials using the LIBRARY function with speci ed criteria.

(setf partials (library 'la-mar-frames 'frames nil :random 6))

Generating a sequence of chords from the list of frames within speci ed frequency and
amplitude ranges.

(spectral partials
          :min-freq 50.00   ; Minimum frequency threshold.
          :max-freq 4000.00 ; Maximum frequency threshold.
          :min-amp 0.01     ; Minimum amplitude threshold.
          :quantize 1/2     ; Frequency quantization to semitones.
          :chord t)         ; Enable chord generation.

=> ((bb2b3d4bb4c5d5eb5e5f5fs5g5gs5bb5b5c6eb6g6bb6)
    (b3d4bb4d5eb5f5g5b5eb6g6)
    (d2bb2fs3g3b3d4e4bb4eb5f5g5b5eb6g6)
    (bb2b3d4f4bb4b4d5eb5f5g5b5eb6g6)
    (bb2b3d4bb4c5eb5f5g5b5eb6g6bb6)
    (bb2b3d4bb4d5eb5f5g5b5eb6g6bb6cs7))

In this example, the SPECTRAL function processes a list of partials to generate a sequence of
chords. These chords adhere to speci ed constraints regarding frequency and amplitude, with
frequencies quantized to the nearest semitone for musical coherence. The output
demonstrates the varied harmonic content achievable through these parameters, showcasing
the function's utility in musical composition and sound design.
                              fi
                                                            fi
                                                                 fi
