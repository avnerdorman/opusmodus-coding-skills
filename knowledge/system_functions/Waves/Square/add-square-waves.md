Opusmodus                                                                    add-square-waves   1

add-square-waves niter res freq amplitude
                          &key phase modulation

[Function]

Arguments and Values:
niter                   a number representing the iteration of the wave.
res                     resolution and length of the wave.
freq                    a number representing the frequency of the wave.
amplitude               a number representing the amplitude of the wave.
                        or a sequence serving as alternating amplitudes.
phase                   a number representing the phase. The default is NIL.
modulation              if NIL no modulation, otherwise a wave. The default is NIL.


Description:

ADD-SQUARE-WAVES are generated by GEN-SQUARE niter times, halving freq at
each iteration. Arguments following niter are the same as in GEN-SQUARE.

(add-square-waves 4 120 4 0.6)
=> (3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0
    3.0 3.0 3.0 3.0 3.0 3.0 3.0 1.7999999999999998
    1.7999999999999998 1.7999999999999998 . . .)


Examples:

The term niter is an abbreviation for n iterations. It is a form of frequency control
making possible a halving of frequency at each iteration. This is a feature of the famous
Poincare oscillation or section, which is a common feature of harmonic and dynamic
systems. As with the GEN-SQUARE examples the following demonstrate how the addition of
:modulation and :phase can have a rich impact on the distortions of the waveform.
Opusmodus                                          add-square-waves   2

(list-plot (add-square-waves 4 64 4 0.6))




(list-plot
 (add-square-waves 4 120 1 0.6
  :modulation (gen-square 120 3 0.4 :phase 60)))
Opusmodus                                               add-square-waves   3

(list-plot
 (add-square-waves 4 120 4 0.6
  :modulation (gen-square 120 3 0.4 :phase 60)))




(list-plot
 (add-square-waves 4 120 4 0.6
  :modulation (gen-sine 120 1 '(0.5 0.2 0.1) :phase 60)))
Opusmodus                                                              add-square-waves      4

Here below there's a clear example of how alternating amplitude values can affect the wave
output when the vectors are mapped to pitches.

(vector-to-pitch
 '(g3 g5)
 (add-square-waves 4 64 4 0.6
  :modulation (gen-sine 64 7 '(0.5 0.2 0.9) :phase 60)))
=> (g5 g5 g5 g5 g5 g5 b4 b4 b4 b4 b4 b4 b4 b4 b4 b4 b4
    b4 b4 b4 b4 b4 b4 b4 b4 b4 ds4 b4 ds4 ds4 b4 ds4
    ds4 ds4 ds4 b4 ds4 b4 b4 ds4 b4 b4 ds4 b4 ds4 b4
    ds4 ds4 ds4 ds4 ds4 ds4 ds4 ds4 ds4 g3 g3 b4 g3 g3
    ds4 b4 b4 ds4)
