Opusmodus                                                                          gen-triangle   1

gen-triangle res freq amplitude &key phase modulation
[Function]

Arguments and Values:
res                      resolution and length of the wave.
freq                     a number representing the frequency of the wave.
amplitude                a number representing the amplitude of the wave.
                         or a sequence serving as alternating amplitudes.
phase                    a number representing the phase. The default is NIL.
modulation               if NIL no modulation, otherwise a wave. The default is NIL.


Description:

The GEN-TRIANGLE function generates a sequence of vectors that describe and simulate
the characteristics of a triangle wave.

(gen-triangle 32 1 0.5)
=> (0.0 0.0625 0.125 0.1875 0.25 0.3125 0.375
    0.4375 0.5 0.4375 0.375 0.3125000000000001 0.25
    0.1874999999999999 0.125 0.06250000000000011
    0.0 -0.0625 -0.125 -0.1875 -0.25 -0.3125
    -0.3749999999999998 -0.4375 -0.5 -0.4375
    -0.3749999999999998 -0.3125 -0.25 -0.1875
    -0.12500000000000022 -0.0625)

With control over resolution (the length of the wave), frequency and amplitude (and
additional control over phase and modulation) this function can be a remarkably effective
tool for creating gestural forms in pitch, rhythm, dynamics and structure.


Examples:

With the function LIST-PLOT as a guide it's possible to experiment with shapes and forms
before applying these to musical parameters.
Opusmodus                                                               gen-triangle   2

(list-plot (gen-triangle 120 3 0.5))




In the example below the keyword :modulation is applied and its values are generated by
another wave produced by the GEN-TRIANGLE function.

(list-plot
 (gen-triangle 120 1 0.5 :modulation (gen-triangle 120 3 0.2)))
Opusmodus                                                            gen-triangle     3

In the example below the amplitude parameter '(0.5 0.2 0.1) has three values. These
represent a sequence of alternating amplitudes.

(list-plot
 (gen-triangle 120 1 '(0.5 0.2 0.1)
  :modulation (gen-triangle 120 3 0.3)))
Opusmodus                                                                   gen-triangle     4

In this nal example the keyword :phase is used to produce a different start point (90) in
the 360 degree range of the modulating wave.

(list-plot
 (gen-triangle 120 3 '(0.5 0.2 0.1)
  :modulation (gen-triangle 120 3 0.3 :phase 90)))




Here below there's a clear example of how alternating amplitude values can affect the wave
output when the vectors are mapped to pitches.

(vector-to-pitch '(g3 g5)
 (gen-triangle 120 1 '(0.5 0.2 0.1)
  :modulation (gen-triangle 120 1 0.3 :phase 90)))
=> (g4 g4 g4 gs4 gs4 g4 as4 gs4 gs4 b4 a4 gs4 c5 a4 gs4
    d5 as4 gs4 ds5 as4 a4 e5 b4 a4 f5 b4 a4 fs5 c5 a4 g5
    c5 a4 fs5 b4 a4 f5 b4 a4 e5 b4 a4 e5 as4 a4 ds5 as4
    gs4 d5 as4 gs4 cs5 a4 gs4 cs5 a4 gs4 c5 a4 gs4 c5 a4
    gs4 as4 gs4 g4 a4 g4 g4 g4 g4 g4 fs4 fs4 g4 e4 fs4
    fs4 d4 f4 fs4 cs4 e4 f4 b3 ds4 f4 a3 ds4 f4 g3 d4 f4
    a3 ds4 f4 b3 e4 fs4 cs4 f4 fs4 ds4 fs4 g4 fs4 g4 g4
    gs4 gs4 gs4 as4 a4 gs4 cs5 as4 a4 ds5 b4 a4)

The example score by Janusz Podrazik is a powerful example of how this function can
produce captivating results. Notice in particular how the rhythms and sections have been
devised.
fi
Opusmodus                                                     gen-triangle   5

Score Example:
(setf size 200)
(setf vector1 (gen-triangle size 1 '(0.5 0.2 0.9 0.4 0.5)
                            :modulation (gen-triangle size 1 0.5)))

(setf vector2 (gen-triangle size 1 '(0.1 0.2 0.4)
                            :modulation (gen-triangle size 1 0.2)))

(setf pitch1 (gen-divide 5 (vector-to-pitch '(c1 gs6) vector1)))
(setf pitch2 (gen-divide 3 (vector-to-pitch '(c1 gs6) vector2)))
(setf transp (pitch-transpose -12 pitch2))
(setf variant (pitch-variant transp :variant 'i))

(setf len1 (gen-loop 2 (rnd-sample 20 '((5q = = = =)))))
(setf len2 (gen-loop 2 (rnd-sample 20 '((q) (3q = =) (q)
                                        (e =) (3q= =) (q) (3q ==)))))

(setf dur1 (assemble-seq (6~ (2~ len2)) '(3q= =) '(3q = =)
                         '(5q== ==) (rest (1~ len1)) '(3q = =)
                         (rnd-order (2~ len2) :list t) '(q)))

(setf dur2 (assemble-seq (1~ (2~ len2)) (2~ (2~ len2)) (3~ (2~ len2))
                         (1~ (2~ len2)) (1~ len2) (2~ len2) '(q)))

(setf vel1 (gen-cresc-dim (get-count dur1 :sum t) 'pp 'mf))
(setf vel2 (gen-cresc-dim (get-count dur2 :sum t) 'pp 'mf))

(setf mat1 (make-omn
            :length dur1
            :pitch (filter-repeat 1 pitch1)
            :velocity vel1
            :flat t))

(setf mat2 (make-omn
            :length dur2
            :pitch (filter-repeat 1 variant)
            :velocity vel2
            :flat t))

(def-score triangle
           (:title "Waves Triangle"
            :composer "OPMO" :copyright "Â© 2014 Opusmodus"
            :key-signature 'chromatic
            :time-signature '(4 4) :tempo 36
            :layout (piano-solo-layout 'rh 'lh))

  (rh :omn mat1
      :sound 'gm :channel 1 :program 'acoustic-grand-piano)

  (lh :omn mat2))
