Opusmodus                                                                 add-triangle-waves   1

add-triangle-waves niter res freq amplitude
                               &key phase modulation

[Function]

Arguments and Values:
niter                   a number representing the iteration of the wave.
res                     resolution and length of the wave.
freq                    a number representing the frequency of the wave.
amplitude               a number representing the amplitude of the wave.
                        or a sequence serving as alternating amplitudes.
phase                   a number representing the phase. The default is NIL.
modulation              if NIL no modulation, otherwise a wave. The default is NIL.


Description:

ADD-TRIANGLE-WAVES are generated by GEN-TRIANGLE niter times, halving freq
at each iteration. Arguments following niter are the same as in GEN-TRIANGLE.

(add-triangle-waves 4 120 4 0.6)
=> (0.0 0.155 0.31 0.46499999999999997 0.62
    0.775 0.9299999999999999 1.0849999999999997
    1.16 1.155 1.1500000000000001 . . .)


Examples:

The term niter is an abbreviation for N iterations. It is a form of frequency
control making possible a halving of frequency at each iteration. This is a feature of the
famous Poincare oscillation or section, which is a common feature of harmonic and dynamic
systems. As with the GEN-TRIANGLE examples the following demonstrate how the addition
of :modulation and :phase can have a rich impact on the distortions of the waveform.
Opusmodus                                            add-triangle-waves   2

(list-plot (add-triangle-waves 4 64 4 0.6))




(list-plot
 (add-triangle-waves 4 120 1 0.6
  :modulation (gen-triangle 120 1 0.4 :phase 60)))
Opusmodus                                              add-triangle-waves   3

(list-plot
 (add-triangle-waves 4 120 4 0.6
  :modulation (gen-triangle 120 1 0.4 :phase 60)))




(list-plot
 (add-triangle-waves 4 120 4 0.6
  :modulation (gen-triangle 120 1 '(0.5 0.2 0.1) :phase 60)))
Opusmodus                                                            add-triangle-waves      4

Here below there's a clear example of how alternating amplitude values can affect the wave
output when the vectors are mapped to pitches.

(vector-to-pitch
 '(g3 g5)
 (add-triangle-waves 4 64 4 0.6
  :modulation (gen-triangle 64 1 '(0.5 0.2 0.1) :phase 60)))
=> (b3 ds4 g4 d5 d5 d5 cs5 d5 cs5 fs4 g4 fs4 as4 a4 as4
    d5 cs5 d5 ds5 ds5 e5 c5 as4 g4 gs4 e4 d4 e4 cs4 c4
    ds4 cs4 g4 d4 fs4 cs5 cs4 b4 g5 cs4 g5 ds5 cs5 ds5
    fs4 f5 d4 c4 e4 cs4 ds4 d4 f4 e4 b3 a3 gs3 b3 g3 g3
    fs5 as4 gs4 fs4)

The example score is a powerful example of how this function can produce captivating
results. Notice in particular how the rhythms and sections have been devised.


Score Example:
(setf size 200)
(setf vector
      (add-triangle-waves
       4 size 1 0.6
       :modulation (gen-triangle size 1 '(0.5 0.4 0.3 0.6)
       :modulation (gen-triangle size 1 0.3 :phase 180))))

(setf pitches (gen-divide 4 (vector-to-pitch '(g1 g6) vector)))
(setf transpose (pitch-transpose -12 pitches))
(setf variants (pitch-variant transpose :variant '?))
(setf length (rnd-sample 120 '(s e s s)))
(setf time (span pitches length))
(setf dynamics '(p mf ff))

(def-score add-triangle
           (:title "Waves Add-Triangle"
            :composer "OPMO"
            :copyright "Â© 2014 Opusmodus"
            :key-signature 'chromatic
              :time-signature (get-time-signature time)
            :tempo 120
            :layout (piano-solo-layout 'rh 'lh))

  (rh
   :length time :pitch pitches :velocity (rnd-sample size dynamics)
   :sound 'gm :channel 1 :program 'acoustic-grand-piano)

  (lh
   :length time :pitch variants :velocity (rnd-sample size dynamics)))
