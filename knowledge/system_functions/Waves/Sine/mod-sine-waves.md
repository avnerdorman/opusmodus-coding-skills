Opusmodus                                                                      mod-sine-waves   1

mod-sine-waves niter res freq amplitude
                        &key phase modulation variant

[Function]

Arguments and Values:
niter                   a number representing the iteration of the wave.
res                     resolution and length of the wave.
freq                    a number representing the frequency of the wave.
amplitude               a number representing the amplitude of the wave.
                        or a sequence serving as alternating amplitudes.
phase                   a number representing the phase. The default is NIL.
modulation              if NIL no modulation, otherwise a wave. The default is NIL.
variant                 1 or 2. The default is 1.


Description:

Modulating iterations of sine-waves as generated by GEN-SINE niter times. Arguments
following niter are the same as in GEN-SINE.

(mod-sine-waves 4 120 4 0.6)
=> (0.0 0.13695889313765114 0.2948844363274477
      0.4549696301799565 0.567712505442739 . . .)


Examples:

The term niter is an abbreviation for n iterations. It is a form of frequency control
making possible a halving of frequency at each iteration. This is a feature of the
famous Poincare oscillation or section, which is a common feature of harmonic and dynamic
systems. As with the GEN-SINE examples the following demonstrate how the addition
of :modulation and :phase can have a rich impact on the distortions of the waveform.
Opusmodus                                        mod-sine-waves   2

(list-plot (mod-sine-waves 1 120 4 0.6))




(list-plot
 (mod-sine-waves 1 120 1 0.6
  :modulation (gen-sine 120 1 0.4 :phase 60)))
Opusmodus                                                            mod-sine-waves   3

In the example below a new keyword is introduced :variant. This has two positions 1
and 2 of which 1 is the default.

(list-plot
 (mod-sine-waves 50 120 4 0.3
  :modulation (gen-sine 120 1 0.4)))




(list-plot
 (mod-sine-waves 50 120 4 0.3
  :modulation (gen-sine 120 1 0.4) :variant 2))
Opusmodus                                                              mod-sine-waves   4

Here below there's a clear example of how alternating amplitude values can affect the
wave output when the vectors are mapped to pitches.

(vector-to-pitch
 '(g3 g5)
 (mod-sine-waves 4 64 4 0.6
  :modulation
  (gen-sine 64 1 '(0.5 0.2 0.1) :phase 60)))
=> (g4 cs5 fs5 g5 f5 e5 f4 e4 c4 g3 g3 g3 g4 cs4 cs4 cs5 ds5
    e5 g3 gs3 g3 g3 g5 fs5 e5 fs5 a4 d4 a4 g3 g3 gs3 cs5
    d4 c4 ds4 ds5 g4 ds4 b3 g3 e5 g3 d4 ds4 f5 e5 d5 e5
    f5 cs4 g3 fs5 fs5 fs5 a4 gs3 a4 fs5 g5 cs5 d4 f4 d5)
Opusmodus                                                                  mod-sine-waves      5

These complex visual gestures can be used most effectively to structure distinctive patterns
in pitch and dynamics parameters. The score example amply demonstrates this.


Score Example:
(setf size 120)
(setf vector (mod-sine-waves
                4 size 4 0.6
                :modulation
                (gen-sine size 1 '(0.5 0.4 0.3 0.6)
                 :modulation (gen-sine size 1 0.3 :phase 180))
                :variant 2))

(setf pitches (gen-divide 4 (vector-to-pitch '(g1 g6) vector)))
(setf transpose (pitch-transpose -12 pitches))
(setf section (rnd-unique (/ (length pitches) 2)
                          (gen-integer 0 (1- (length pitches)))))

(setf variants (pitch-variant transpose :variant '? :section section))
(setf dur1 (rnd-sample (- size 9) '(s e s s)))
(setf dur2 '(s s s s s s s s q))
(setf duration (flatten (list dur1 dur2)))
(setf dur-rh (span pitches duration))
(setf dur-lh (span variants duration))
(setf dynamics '(p mp mf f ff))

(def-score mod-sine
           (:key-signature 'chromatic
            :time-signature '(4 4)
            :tempo 100)

 (right-hand
  :length dur-rh
  :pitch pitches
  :velocity (rnd-sample size dynamics)
  :sound 'gm
  :channel 1
  :program 'acoustic-grand-piano)

 (left-hand
  :length dur-lh
  :pitch variants
  :velocity (rnd-sample size dynamics)))

(display-midi (compile-score â€˜mod-sine))
